<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Raporlar</title>

  <!-- CONFIG -->
  <script src="config.js"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- SUPABASE & CHARTS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    .report-card{
      background:#fff;padding:20px;border-radius:12px;
      box-shadow:0 2px 8px rgba(0,0,0,.12);flex:1;min-width:220px
    }
    .report-card h3{margin:0;font-size:16px}
    .report-card .value{margin-top:8px;font-size:24px;font-weight:700}
    .toolbar{
      background:#fff;padding:16px;border-radius:12px;
      box-shadow:0 2px 8px rgba(0,0,0,.12);
      margin-bottom:20px;display:flex;gap:10px;flex-wrap:wrap;
      align-items:center
    }
    select, input[type="date"]{
      padding:10px;border:1px solid #ccc;border-radius:8px
    }
  </style>
</head>
<body>
  <div class="mobile-menu-btn" onclick="toggleMenu()">â˜°</div>

  <aside class="sidebar">
    <div class="sidebar-header">
      <img id="brandLogo" class="sidebar-logo" alt="Logo">
      <div id="brandTitle" class="sidebar-title"></div>
    </div>

    <div class="sidebar-scroll">
      <ul class="menu">
        <li onclick="window.location='index.html'">Bekleyen</li>
        <li onclick="window.location='index.html'">HazÄ±rlandÄ±</li>
        <li onclick="window.location='index.html'">KargolandÄ±</li>
        <li onclick="window.location='index.html'">Tamamlananlar</li>
        <li onclick="window.location='index.html'">Sorunlu</li>
        <li onclick="window.location='index.html'">Ä°ptal</li>
        <li class="active">Raporlar</li>
      </ul>

      <button class="btn-danger" onclick="window.location='login.html'">Ã‡Ä±kÄ±ÅŸ Yap</button>
    </div>
  </aside>

  <div class="content-area">
    <h2 style="margin-bottom:14px;">ðŸ“Š Raporlama EkranÄ±</h2>

    <div class="toolbar">
      <label><b>BaÅŸlangÄ±Ã§:</b></label><input type="date" id="startDate"/>
      <label><b>BitiÅŸ:</b></label><input type="date" id="endDate"/>
      <label><b>Durum:</b></label>
      <select id="statusSel">
        <option value="">Hepsi</option>
        <option>Bekliyor</option>
        <option>HazÄ±rlandÄ±</option>
        <option>KargolandÄ±</option>
        <option>TamamlandÄ±</option>
        <option>Sorunlu</option>
        <option>Ä°ptal</option>
      </select>

      <button class="btn-primary" onclick="loadReport()">Raporla</button>
      <button class="btn-secondary" onclick="exportExcel()">Excel Ä°ndir</button>
      <button class="btn-close" onclick="window.location='index.html'">Geri</button>
    </div>

    <div id="summaryCards" style="display:flex;gap:20px;flex-wrap:wrap;margin-bottom:20px;"></div>

    <div style="background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.12);margin-bottom:20px;">
      <h3>ðŸ“ˆ GÃ¼nlÃ¼k SipariÅŸ</h3>
      <canvas id="dailyChart" style="max-height:300px;"></canvas>
    </div>

    <div style="background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.12);margin-bottom:20px;">
      <h3>ðŸ“ž SipariÅŸ Alan</h3>
      <canvas id="salesByTel" style="max-height:300px;"></canvas>
    </div>

    <div class="table-wrapper">
      <table class="orders-table">
        <thead>
          <tr>
            <th>No</th>
            <th>Ä°sim</th>
            <th>Tutar</th>
            <th>Durum</th>
            <th>Tarih</th>
            <th>SipariÅŸ Alan</th>
          </tr>
        </thead>
        <tbody id="reportTable"></tbody>
      </table>
    </div>
  </div>

  <!-- RAPOR SCRIPTÄ° (orijinal akÄ±ÅŸ) -->
  <script>
    (async ()=>{
      await window.waitConfig();
      document.getElementById("brandLogo").src = CONFIG.logo;
      document.getElementById("brandTitle").innerHTML = CONFIG.brandName + "<br/>SipariÅŸ Sistemi";
      /* ... orijinal rapor scripti app iÃ§inde kalacak ... */
    })();

    function toggleMenu(){
      document.querySelector(".sidebar").classList.toggle("open");
    }
    document.addEventListener("click", e=>{
      const sidebar = document.querySelector(".sidebar");
      const btn = document.querySelector(".mobile-menu-btn");
      if(!sidebar.classList.contains("open")) return;
      if(sidebar.contains(e.target) || btn.contains(e.target)) return;
      sidebar.classList.remove("open");
    });
  </script>

  <!-- Orijinal rapor akÄ±ÅŸÄ±nda zaten app iÃ§i scriptler var -->
  <script src="rapor.html"></script>
</body>
</html>
